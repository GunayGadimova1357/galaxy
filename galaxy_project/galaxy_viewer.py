# import pygame
# from PIL import Image

# # === –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ===
# IMAGE_PATH = "gal.jpg"   # –ü—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é
# WINDOW_SIZE = 800
# SAMPLE_AMOUNT = 300
# THRESHOLD = 100  # –ü–æ—Ä–æ–≥ —è—Ä–∫–æ—Å—Ç–∏ (0‚Äì255)

# # === –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ ===
# img = Image.open(IMAGE_PATH).convert("RGB")
# img = img.resize((SAMPLE_AMOUNT, SAMPLE_AMOUNT))
# pixels = img.load()

# # === –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–∫–Ω–∞ ===
# pygame.init()
# screen = pygame.display.set_mode((WINDOW_SIZE, WINDOW_SIZE))
# pygame.display.set_caption("Galaxy Visualizer (Python)")
# clock = pygame.time.Clock()

# running = True
# while running:
#     screen.fill((0, 0, 0))  # –ß—ë—Ä–Ω—ã–π —Ñ–æ–Ω

#     for y in range(SAMPLE_AMOUNT):
#         for x in range(SAMPLE_AMOUNT):
#             r, g, b = pixels[x, y]
#             brightness = 0.299 * r + 0.587 * g + 0.114 * b

#             if brightness > THRESHOLD:
#                 # –†–∏—Å—É–µ–º –±–µ–ª—É—é —Ç–æ—á–∫—É
#                 pos_x = int(x * (WINDOW_SIZE / SAMPLE_AMOUNT))
#                 pos_y = int(y * (WINDOW_SIZE / SAMPLE_AMOUNT))
#                 pygame.draw.circle(screen, (255, 255, 255), (pos_x, pos_y), 1)

#     pygame.display.flip()

#     # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
#     for event in pygame.event.get():
#         if event.type == pygame.QUIT:
#             running = False

#     clock.tick(60)

# pygame.quit()

# import pygame
# from PIL import Image
# import math


# IMAGE_PATH = "gal.jpg"
# WINDOW_SIZE = 800
# SAMPLE_AMOUNT = 300
# THRESHOLD = 100


# img = Image.open(IMAGE_PATH).convert("RGB")
# img = img.resize((SAMPLE_AMOUNT, SAMPLE_AMOUNT))
# pixels = img.load()


# pygame.init()
# screen = pygame.display.set_mode((WINDOW_SIZE, WINDOW_SIZE))
# pygame.display.set_caption("Galaxy Visualizer")
# clock = pygame.time.Clock()

# # === –¶–µ–Ω—Ç—Ä —Ö–æ–ª—Å—Ç–∞ –∏ –Ω–∞—á–∞–ª—å–Ω—ã–π —É–≥–æ–ª –≤—Ä–∞—â–µ–Ω–∏—è ===
# center_x = WINDOW_SIZE // 2
# center_y = WINDOW_SIZE // 2
# angle = 0  # –≤ —Ä–∞–¥–∏–∞–Ω–∞—Ö

# running = True
# while running:
#     screen.fill((0, 0, 0))
#     angle += 0.01  # —Å–∫–æ—Ä–æ—Å—Ç—å –≤—Ä–∞—â–µ–Ω–∏—è (—á–µ–º –±–æ–ª—å—à–µ, —Ç–µ–º –±—ã—Å—Ç—Ä–µ–µ)

#     for y in range(SAMPLE_AMOUNT):
#         for x in range(SAMPLE_AMOUNT):
#             r, g, b = pixels[x, y]
#             brightness = 0.299 * r + 0.587 * g + 0.114 * b

#             if brightness > THRESHOLD:
#                 # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
#                 rel_x = x - SAMPLE_AMOUNT / 2
#                 rel_y = y - SAMPLE_AMOUNT / 2

#                 # –í—Ä–∞—â–µ–Ω–∏–µ –≤–æ–∫—Ä—É–≥ —Ü–µ–Ω—Ç—Ä–∞
#                 rot_x = rel_x * math.cos(angle) - rel_y * math.sin(angle)
#                 rot_y = rel_x * math.sin(angle) + rel_y * math.cos(angle)

#                 # –ú–∞—Å—à—Ç–∞–± –∏ —Å–º–µ—â–µ–Ω–∏–µ –≤ —Ü–µ–Ω—Ç—Ä —ç–∫—Ä–∞–Ω–∞
#                 draw_x = int(center_x + rot_x * (WINDOW_SIZE / SAMPLE_AMOUNT))
#                 draw_y = int(center_y + rot_y * (WINDOW_SIZE / SAMPLE_AMOUNT))

#                 pygame.draw.circle(screen, (255, 255, 255), (draw_x, draw_y), 1)

#     pygame.display.flip()

#     for event in pygame.event.get():
#         if event.type == pygame.QUIT:
#             running = False

#     clock.tick(60)

# pygame.quit()

# import pygame
# from PIL import Image
# import math
# import random


# IMAGE_PATH = "gal.jpg"
# WINDOW_SIZE = 800
# SAMPLE_AMOUNT = 300
# THRESHOLD = 80


# img = Image.open(IMAGE_PATH).convert("RGB")
# img = img.resize((SAMPLE_AMOUNT, SAMPLE_AMOUNT))
# pixels = img.load()


# pygame.init()
# screen = pygame.display.set_mode((WINDOW_SIZE, WINDOW_SIZE))
# pygame.display.set_caption("Galaxy Visualizer 2.0")
# clock = pygame.time.Clock()


# try:
#     pygame.mixer.init()
#     pygame.mixer.music.load("space.mp3")
#     pygame.mixer.music.play(-1)
# except:
#     print("‚ö†Ô∏è –ú—É–∑—ã–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –±–µ–∑ –∑–≤—É–∫–∞.")


# center = WINDOW_SIZE // 2
# angle = 0
# zoom_base = 1.0

# running = True
# while running:
#     screen.fill((0, 0, 0))
#     angle += 0.01
#     zoom = math.sin(pygame.time.get_ticks() * 0.001) * 0.3 + zoom_base

#     for y in range(SAMPLE_AMOUNT):
#         for x in range(SAMPLE_AMOUNT):
#             r, g, b = pixels[x, y]
#             brightness = 0.299 * r + 0.587 * g + 0.114 * b

#             if brightness > THRESHOLD:
#                 # –°–º–µ—â–µ–Ω–∏–µ –æ—Ç —Ü–µ–Ω—Ç—Ä–∞
#                 rel_x = x - SAMPLE_AMOUNT / 2
#                 rel_y = y - SAMPLE_AMOUNT / 2

#                 # –°–ø–∏—Ä–∞–ª—å–Ω—ã–π —É–≥–æ–ª
#                 offset_angle = math.hypot(rel_x, rel_y) * 0.015
#                 final_angle = angle + offset_angle

#                 # –í—Ä–∞—â–µ–Ω–∏–µ
#                 rot_x = rel_x * math.cos(final_angle) - rel_y * math.sin(final_angle)
#                 rot_y = rel_x * math.sin(final_angle) + rel_y * math.cos(final_angle)

#                 # –ú–∞—Å—à—Ç–∞–± –∏ –ø–æ–∑–∏—Ü–∏—è
#                 draw_x = int(center + rot_x * (WINDOW_SIZE / SAMPLE_AMOUNT) * zoom)
#                 draw_y = int(center + rot_y * (WINDOW_SIZE / SAMPLE_AMOUNT) * zoom)

#                 # –†–∞–∑–º–µ—Ä –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —è—Ä–∫–æ—Å—Ç–∏
#                 radius = int(brightness / 120)
#                 radius = max(1, min(radius, 3))

#                 # –†–∏—Å—É–µ–º —Ü–≤–µ—Ç–Ω–æ–π –∫—Ä—É–≥
#                 pygame.draw.circle(screen, (r, g, b), (draw_x, draw_y), radius)

#     # üî• –í—Å–ø—ã—à–∫–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö "–∑–≤—ë–∑–¥"
#     for _ in range(10):
#         fx = random.randint(0, WINDOW_SIZE)
#         fy = random.randint(0, WINDOW_SIZE)
#         pygame.draw.circle(screen, (255, 255, 255), (fx, fy), 1)

#     pygame.display.flip()

#     for event in pygame.event.get():
#         if event.type == pygame.QUIT:
#             running = False
#         # üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç
#         elif event.type == pygame.KEYDOWN:
#             if event.key == pygame.K_s:
#                 pygame.image.save(screen, "screenshot.png")
#                 print("üì∏ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: screenshot.png")

#     clock.tick(60)

# pygame.quit()



# import pygame
# from PIL import Image
# import math
# import random
# import os

# WINDOW_SIZE = 800
# SAMPLE_AMOUNT = 300
# THRESHOLD = 80


# images = ["gal1.jpg", "gal2.jpeg", "gal3.jpg"]
# current_index = 0

# def load_image(path):
#     img = Image.open(path).convert("RGB")
#     img = img.resize((SAMPLE_AMOUNT, SAMPLE_AMOUNT))
#     return img.load()

# pixels = load_image(images[current_index])

# # === Pygame init ===
# pygame.init()
# screen = pygame.display.set_mode((WINDOW_SIZE, WINDOW_SIZE))
# pygame.display.set_caption("Galaxy Visualizer 2.0")
# clock = pygame.time.Clock()

# # === –§–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) ===
# try:
#     pygame.mixer.init()
#     pygame.mixer.music.load("space.mp3")
#     pygame.mixer.music.play(-1)
# except:
#     print("‚ö†Ô∏è –ú—É–∑—ã–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –±–µ–∑ –∑–≤—É–∫–∞.")

# # === –¶–µ–Ω—Ç—Ä –∏ —É–≥–æ–ª ===
# center = WINDOW_SIZE // 2
# angle = 0
# zoom_base = 1.0

# running = True
# while running:
#     screen.fill((0, 0, 0))
#     angle += 0.01
#     zoom = math.sin(pygame.time.get_ticks() * 0.001) * 0.3 + zoom_base
    

#     for y in range(SAMPLE_AMOUNT):
#         for x in range(SAMPLE_AMOUNT):
#             r, g, b = pixels[x, y]
#             brightness = 0.299 * r + 0.587 * g + 0.114 * b

#             if brightness > THRESHOLD:
#                 # –°–º–µ—â–µ–Ω–∏–µ –æ—Ç —Ü–µ–Ω—Ç—Ä–∞
#                 rel_x = x - SAMPLE_AMOUNT / 2
#                 rel_y = y - SAMPLE_AMOUNT / 2

#                 # –°–ø–∏—Ä–∞–ª—å–Ω—ã–π —É–≥–æ–ª
#                 offset_angle = math.hypot(rel_x, rel_y) * 0.015
#                 final_angle = angle + offset_angle

#                 # –í—Ä–∞—â–µ–Ω–∏–µ
#                 rot_x = rel_x * math.cos(final_angle) - rel_y * math.sin(final_angle)
#                 rot_y = rel_x * math.sin(final_angle) + rel_y * math.cos(final_angle)

#                 # –ú–∞—Å—à—Ç–∞–± –∏ –ø–æ–∑–∏—Ü–∏—è
#                 draw_x = int(center + rot_x * (WINDOW_SIZE / SAMPLE_AMOUNT) * zoom)
#                 draw_y = int(center + rot_y * (WINDOW_SIZE / SAMPLE_AMOUNT) * zoom)

#                 # –†–∞–∑–º–µ—Ä —Ç–æ—á–∫–∏
#                 radius = int(brightness / 120)
#                 radius = max(1, min(radius, 3))

#                 pygame.draw.circle(screen, (r, g, b), (draw_x, draw_y), radius)

#     # üî• –í—Å–ø—ã—à–∫–∏
#     for _ in range(10):
#         fx = random.randint(0, WINDOW_SIZE)
#         fy = random.randint(0, WINDOW_SIZE)
#         pygame.draw.circle(screen, (255, 255, 255), (fx, fy), 1)

#     pygame.display.flip()

#     for event in pygame.event.get():
#         if event.type == pygame.QUIT:
#             running = False

#         # üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞
#         elif event.type == pygame.KEYDOWN:
#             if event.key == pygame.K_s:
#                 pygame.image.save(screen, "screenshot.png")
#                 print("üì∏ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: screenshot.png")

#             # ‚è≠ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≥–∞–ª–∞–∫—Ç–∏–∫–∏
#             elif event.key == pygame.K_SPACE:
#                 current_index = (current_index + 1) % len(images)
#                 new_pixels = load_image(images[current_index])

#                 # === –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ ===
#                 for alpha in range(0, 256, 12):
#                     screen.fill((0, 0, 0))
#                     for y in range(SAMPLE_AMOUNT):
#                         for x in range(SAMPLE_AMOUNT):
#                             r1, g1, b1 = pixels[x, y]
#                             r2, g2, b2 = new_pixels[x, y]

#                             # –õ–∏–Ω–µ–π–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è —Ü–≤–µ—Ç–æ–≤
#                             r = int(r1 + (r2 - r1) * (alpha / 255))
#                             g = int(g1 + (g2 - g1) * (alpha / 255))
#                             b = int(b1 + (b2 - b1) * (alpha / 255))

#                             brightness = 0.299 * r + 0.587 * g + 0.114 * b
#                             if brightness > THRESHOLD:
#                                 rel_x = x - SAMPLE_AMOUNT / 2
#                                 rel_y = y - SAMPLE_AMOUNT / 2
#                                 offset_angle = math.hypot(rel_x, rel_y) * 0.015
#                                 final_angle = angle + offset_angle

#                                 rot_x = rel_x * math.cos(final_angle) - rel_y * math.sin(final_angle)
#                                 rot_y = rel_x * math.sin(final_angle) + rel_y * math.cos(final_angle)

#                                 draw_x = int(center + rot_x * (WINDOW_SIZE / SAMPLE_AMOUNT) * zoom)
#                                 draw_y = int(center + rot_y * (WINDOW_SIZE / SAMPLE_AMOUNT) * zoom)

#                                 pygame.draw.circle(screen, (r, g, b), (draw_x, draw_y), 2)

#                     pygame.display.flip()
#                     clock.tick(60)

#                 pixels = new_pixels  # –æ–±–Ω–æ–≤–ª—è–µ–º –Ω–∞ –Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

#     clock.tick(60)

# pygame.quit()


import pygame
from PIL import Image
import math
import random


WINDOW_SIZE = 800
SAMPLE_AMOUNT = 300
THRESHOLD = 80
SWITCH_INTERVAL_MS = 7000  


images = ["gal1.jpg", "gal.jpg", "gal3.jpg"]
current_index = 0

def load_image(path):
    img = Image.open(path).convert("RGB")
    img = img.resize((SAMPLE_AMOUNT, SAMPLE_AMOUNT))
    return img.load()

pixels = load_image(images[current_index])


pygame.init()
screen = pygame.display.set_mode((WINDOW_SIZE, WINDOW_SIZE))
pygame.display.set_caption("Galaxy Visualizer 2.0")
clock = pygame.time.Clock()


try:
    pygame.mixer.init()
    pygame.mixer.music.load("space.mp3")
    pygame.mixer.music.play(-1)
except:
    print("‚ö†Ô∏è –ú—É–∑—ã–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –±–µ–∑ –∑–≤—É–∫–∞.")


center = WINDOW_SIZE // 2
angle = 0
zoom_base = 1.0
last_switch = pygame.time.get_ticks()

running = True
while running:
    screen.fill((0, 0, 0))
    angle += 0.01
    zoom = math.sin(pygame.time.get_ticks() * 0.001) * 0.3 + zoom_base

    for y in range(SAMPLE_AMOUNT):
        for x in range(SAMPLE_AMOUNT):
            r, g, b = pixels[x, y]
            brightness = 0.299 * r + 0.587 * g + 0.114 * b

            if brightness > THRESHOLD:
                rel_x = x - SAMPLE_AMOUNT / 2
                rel_y = y - SAMPLE_AMOUNT / 2
                offset_angle = math.hypot(rel_x, rel_y) * 0.015
                final_angle = angle + offset_angle

                rot_x = rel_x * math.cos(final_angle) - rel_y * math.sin(final_angle)
                rot_y = rel_x * math.sin(final_angle) + rel_y * math.cos(final_angle)

                draw_x = int(center + rot_x * (WINDOW_SIZE / SAMPLE_AMOUNT) * zoom)
                draw_y = int(center + rot_y * (WINDOW_SIZE / SAMPLE_AMOUNT) * zoom)

                radius = int(brightness / 120)
                radius = max(1, min(radius, 3))

                pygame.draw.circle(screen, (r, g, b), (draw_x, draw_y), radius)


    for _ in range(10):
        fx = random.randint(0, WINDOW_SIZE)
        fy = random.randint(0, WINDOW_SIZE)
        pygame.draw.circle(screen, (255, 255, 255), (fx, fy), 1)

    pygame.display.flip()


    current_time = pygame.time.get_ticks()
    if current_time - last_switch > SWITCH_INTERVAL_MS:
        current_index = (current_index + 1) % len(images)
        new_pixels = load_image(images[current_index])

        for alpha in range(0, 256, 12):
            screen.fill((0, 0, 0))
            for y in range(SAMPLE_AMOUNT):
                for x in range(SAMPLE_AMOUNT):
                    r1, g1, b1 = pixels[x, y]
                    r2, g2, b2 = new_pixels[x, y]

                    r = int(r1 + (r2 - r1) * (alpha / 255))
                    g = int(g1 + (g2 - g1) * (alpha / 255))
                    b = int(b1 + (b2 - b1) * (alpha / 255))

                    brightness = 0.299 * r + 0.587 * g + 0.114 * b
                    if brightness > THRESHOLD:
                        rel_x = x - SAMPLE_AMOUNT / 2
                        rel_y = y - SAMPLE_AMOUNT / 2
                        offset_angle = math.hypot(rel_x, rel_y) * 0.015
                        final_angle = angle + offset_angle

                        rot_x = rel_x * math.cos(final_angle) - rel_y * math.sin(final_angle)
                        rot_y = rel_x * math.sin(final_angle) + rel_y * math.cos(final_angle)

                        draw_x = int(center + rot_x * (WINDOW_SIZE / SAMPLE_AMOUNT) * zoom)
                        draw_y = int(center + rot_y * (WINDOW_SIZE / SAMPLE_AMOUNT) * zoom)

                        pygame.draw.circle(screen, (r, g, b), (draw_x, draw_y), 2)

            pygame.display.flip()
            clock.tick(60)

        pixels = new_pixels
        last_switch = current_time  

    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False

        elif event.type == pygame.KEYDOWN:
            if event.key == pygame.K_s:
                pygame.image.save(screen, "screenshot.png")
                print("üì∏ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: screenshot.png")

            elif event.key == pygame.K_SPACE:
                current_index = (current_index + 1) % len(images)
                new_pixels = load_image(images[current_index])

                for alpha in range(0, 256, 12):
                    screen.fill((0, 0, 0))
                    for y in range(SAMPLE_AMOUNT):
                        for x in range(SAMPLE_AMOUNT):
                            r1, g1, b1 = pixels[x, y]
                            r2, g2, b2 = new_pixels[x, y]

                            r = int(r1 + (r2 - r1) * (alpha / 255))
                            g = int(g1 + (g2 - g1) * (alpha / 255))
                            b = int(b1 + (b2 - b1) * (alpha / 255))

                            brightness = 0.299 * r + 0.587 * g + 0.114 * b
                            if brightness > THRESHOLD:
                                rel_x = x - SAMPLE_AMOUNT / 2
                                rel_y = y - SAMPLE_AMOUNT / 2
                                offset_angle = math.hypot(rel_x, rel_y) * 0.015
                                final_angle = angle + offset_angle

                                rot_x = rel_x * math.cos(final_angle) - rel_y * math.sin(final_angle)
                                rot_y = rel_x * math.sin(final_angle) + rel_y * math.cos(final_angle)

                                draw_x = int(center + rot_x * (WINDOW_SIZE / SAMPLE_AMOUNT) * zoom)
                                draw_y = int(center + rot_y * (WINDOW_SIZE / SAMPLE_AMOUNT) * zoom)

                                pygame.draw.circle(screen, (r, g, b), (draw_x, draw_y), 2)

                    pygame.display.flip()
                    clock.tick(60)

                pixels = new_pixels
                last_switch = pygame.time.get_ticks()  

    clock.tick(60)

pygame.quit()